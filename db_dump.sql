--
-- PostgreSQL database dump
--

-- Dumped from database version 16.2
-- Dumped by pg_dump version 16.2

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: guests; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.guests (
    id integer NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    date_of_birth date NOT NULL,
    citizenship text NOT NULL,
    is_first_visit boolean NOT NULL,
    e_mail text,
    phone text,
    date_added timestamp without time zone DEFAULT '2024-10-03 10:37:50.101029'::timestamp without time zone,
    date_updated timestamp without time zone
);


ALTER TABLE public.guests OWNER TO hotel_admin;

--
-- Name: guests_id_seq; Type: SEQUENCE; Schema: public; Owner: hotel_admin
--

ALTER TABLE public.guests ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.guests_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: payment_methods; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.payment_methods (
    id integer NOT NULL,
    name text NOT NULL,
    description text
);


ALTER TABLE public.payment_methods OWNER TO postgres;

--
-- Name: payment_methods_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.payment_methods ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.payment_methods_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: permissions; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.permissions (
    id integer NOT NULL,
    create_reservations boolean NOT NULL,
    manage_reservations boolean NOT NULL,
    edit_reservations boolean NOT NULL,
    delete_reservations boolean NOT NULL,
    date_added timestamp without time zone DEFAULT '2024-10-03 10:37:50.01225'::timestamp without time zone,
    date_updated timestamp without time zone,
    administrate_users boolean NOT NULL
);


ALTER TABLE public.permissions OWNER TO hotel_admin;

--
-- Name: permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: hotel_admin
--

ALTER TABLE public.permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: reservations; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.reservations (
    id integer NOT NULL,
    date_arrival date NOT NULL,
    date_departure date NOT NULL,
    total_cost numeric NOT NULL,
    payment_method integer NOT NULL,
    commentary text,
    is_cancelled boolean NOT NULL,
    created_by integer NOT NULL,
    last_update_by integer NOT NULL,
    date_added timestamp without time zone DEFAULT '2024-10-03 10:37:50.179321'::timestamp without time zone
);


ALTER TABLE public.reservations OWNER TO hotel_admin;

--
-- Name: reservations_guests_rooms; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.reservations_guests_rooms (
    reservation_id integer NOT NULL,
    guest_id integer NOT NULL,
    room_id integer NOT NULL
);


ALTER TABLE public.reservations_guests_rooms OWNER TO hotel_admin;

--
-- Name: reservations_id_seq; Type: SEQUENCE; Schema: public; Owner: hotel_admin
--

ALTER TABLE public.reservations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reservations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    title text NOT NULL,
    description text,
    is_active boolean NOT NULL,
    date_added timestamp without time zone DEFAULT '2024-10-03 10:37:49.9091'::timestamp without time zone,
    date_updated timestamp without time zone
);


ALTER TABLE public.roles OWNER TO hotel_admin;

--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: hotel_admin
--

ALTER TABLE public.roles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.roles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: roles_permissions; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.roles_permissions (
    role_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.roles_permissions OWNER TO hotel_admin;

--
-- Name: rooms; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.rooms (
    id integer NOT NULL,
    name text NOT NULL,
    area_meters smallint NOT NULL,
    has_double_beds boolean NOT NULL,
    maximum_capacity smallint NOT NULL,
    is_available boolean NOT NULL
);


ALTER TABLE public.rooms OWNER TO postgres;

--
-- Name: rooms_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.rooms ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.rooms_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: hotel_admin
--

CREATE TABLE public.users (
    id integer NOT NULL,
    role_id integer,
    login text NOT NULL,
    password text NOT NULL,
    first_name text NOT NULL,
    last_name text NOT NULL,
    e_mail text NOT NULL,
    phone text NOT NULL,
    date_added timestamp without time zone DEFAULT '2024-10-03 10:37:49.399168'::timestamp without time zone,
    last_login timestamp without time zone
);


ALTER TABLE public.users OWNER TO hotel_admin;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: hotel_admin
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: guests; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.guests (id, first_name, last_name, date_of_birth, citizenship, is_first_visit, e_mail, phone, date_added, date_updated) FROM stdin;
1	Hog	Bobson	2000-01-01	Canada	t	hog@hoggers.com	+7111111111	2024-10-03 10:37:50.101029	2024-10-04 10:43:51.392802
2	Test	Testington	1999-11-12	France	t	testmail@test.com	+11111111	2024-10-03 10:37:50.101029	\N
3	Guy	Willson	1990-12-20	India	f	guy@mcGuy.com	441412414	2024-10-03 10:37:50.101029	\N
17	Dan	Bruce	1970-11-11	Scotland	t	dan@bruce.com	+23123123	2024-10-03 10:37:50.101029	\N
21	Fred	Nudsem	1990-01-01	Canada	t	fred@gmail.com	+199999	2024-10-03 10:37:50.101029	\N
22	Fox	Nataly	1970-04-02	Russia	t	nataly.02@mail.ru	+7-950-000-32-10	2024-10-03 10:37:50.101029	\N
23	Nick	Rybin	1992-08-21	Russia	f	nryb@gmail.com	+777777777	2024-10-03 10:37:50.101029	\N
24	Dan	Davis	1995-10-10	Austria	t	dan333@gmail.com	+223232332	2024-10-03 10:37:50.101029	\N
25	Oleg	Rybin	1993-02-21	Russian	t	oleg@gmail.com	+23123131	2024-10-03 10:37:50.101029	\N
\.


--
-- Data for Name: payment_methods; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.payment_methods (id, name, description) FROM stdin;
1	cash	cash payment
3	digital	digital wallet payment
4	bank	bank transfer payment
5	debit	debit card payment
6	crypto	cryptocurrency payment
\.


--
-- Data for Name: permissions; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.permissions (id, create_reservations, manage_reservations, edit_reservations, delete_reservations, date_added, date_updated, administrate_users) FROM stdin;
1	t	t	t	f	2024-10-03 10:37:50.01225	2024-10-04 10:49:38.013066	f
2	t	t	t	t	2024-10-03 10:37:50.01225	\N	t
3	f	f	f	f	2024-10-03 10:37:50.01225	\N	f
\.


--
-- Data for Name: reservations; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.reservations (id, date_arrival, date_departure, total_cost, payment_method, commentary, is_cancelled, created_by, last_update_by, date_added) FROM stdin;
53	2023-12-01	2023-12-03	20000.0	1	a_comment	f	3	3	2024-10-03 10:37:50.179321
58	2023-12-01	2023-12-05	10000.0	1	commentary here	f	11	11	2024-10-03 10:37:50.179321
61	2024-11-08	2024-11-11	18000.0	5	final comment	f	12	12	2024-10-03 10:37:50.179321
56	2024-10-27	2024-10-30	32500.0	5	a_comment	f	11	11	2024-10-03 10:37:50.179321
62	2024-10-29	2024-11-08	20000.0	1		f	12	12	2024-10-03 10:37:50.179321
63	2024-11-12	2024-11-15	21000.0	1		f	12	12	2024-10-03 10:37:50.179321
54	2023-12-07	2023-12-10	10000	1	new_booking	f	3	3	2024-10-03 10:37:50.179321
55	2024-10-27	2024-10-30	19500.0	1	test_booking	f	11	11	2024-10-03 10:37:50.179321
59	2024-10-29	2024-11-01	27750.0	1	final comment	f	11	11	2024-10-03 10:37:50.179321
51	2023-12-01	2023-12-03	15000.75	1	editing_comment	f	3	11	2024-10-03 10:37:50.179321
68	2024-11-08	2024-11-15	0	1		f	11	12	2024-10-03 10:37:50.179321
67	2024-10-31	2024-11-08	0	1	a new reservation!	f	11	12	2024-10-03 10:37:50.179321
57	2024-10-27	2024-10-31	4000.0	1		t	11	12	2024-10-03 10:37:50.179321
69	2024-11-28	2024-12-07	27504.0	1	new reservation	f	15	15	2024-10-03 10:37:50.179321
60	2024-10-29	2024-11-01	6000.0	1	testing cancellation room id filter	f	12	15	2024-10-03 10:37:50.179321
66	2024-10-30	2024-11-01	6000.0	1		f	12	11	2024-10-03 10:37:50.179321
\.


--
-- Data for Name: reservations_guests_rooms; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.reservations_guests_rooms (reservation_id, guest_id, room_id) FROM stdin;
56	3	26
56	2	26
56	22	26
56	1	26
58	22	6
51	2	7
51	3	7
51	17	5
51	21	5
60	23	5
61	21	5
61	24	5
53	1	26
62	23	9
62	21	11
63	17	5
63	21	5
63	23	26
63	3	26
55	17	10
55	1	10
54	21	15
59	1	8
59	3	7
59	21	6
59	23	6
59	24	27
57	3	5
57	23	5
69	25	26
69	24	26
69	3	23
69	21	15
66	22	10
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.roles (id, title, description, is_active, date_added, date_updated) FROM stdin;
1	Manager	Can create, manage and edit reservations	t	2024-10-03 10:37:49.9091	2024-10-04 11:06:40.550826
2	Administrator	Can create, manage, edit and delete reservations. Can also administrate other users.	t	2024-10-03 10:37:49.9091	\N
3	Reader	Can only browse reservations. No interactive capabilities.	t	2024-10-03 10:37:49.9091	\N
\.


--
-- Data for Name: roles_permissions; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.roles_permissions (role_id, permission_id) FROM stdin;
1	1
2	2
3	3
\.


--
-- Data for Name: rooms; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.rooms (id, name, area_meters, has_double_beds, maximum_capacity, is_available) FROM stdin;
5	standard	20	f	2	t
6	standard	20	f	2	t
7	standard	20	f	2	t
8	standard	20	f	2	t
9	standard	20	f	2	t
10	standard	20	f	2	t
11	standard	20	f	2	t
12	standard	20	f	2	t
13	standard	20	f	2	t
14	standard	20	f	2	t
21	superior	30	t	3	t
22	superior	30	t	3	t
23	superior	30	t	3	t
24	superior	30	t	3	t
25	superior	30	t	3	t
26	executive	35	t	4	t
27	executive	35	t	4	t
28	executive	35	t	4	t
15	comfort	25	f	2	t
16	comfort	25	f	2	t
17	comfort	25	f	2	t
18	comfort	25	f	2	t
19	comfort	25	f	2	t
20	comfort	25	f	2	t
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: hotel_admin
--

COPY public.users (id, role_id, login, password, first_name, last_name, e_mail, phone, date_added, last_login) FROM stdin;
3	1	dan_mngr	password1	Dannio	Dennis	dan@db.com	+231312	2024-10-23 13:34:51.25585	2024-10-26 23:54:01.54619
2	1	test1	testpswd	Testormanxdxxxxx	testingson	test@db.com	1235test	2024-10-03 10:37:49.399168	2024-10-27 00:15:31.343502
14	1	mike	mikepswd	Mike	Miers	mike@gmail.com	+1234567890	2024-10-31 12:55:30.11866	2024-10-31 12:57:27.523059
4	3	g1	g1	Old	Guyson	guy@guy.com	+123	2024-10-23 17:35:27.371512	2024-10-31 13:47:06.026046
1	1	test2	testpswd	hello	testingson	test@db.com	1235test	2024-10-03 10:37:49.399168	2024-10-23 15:47:56.704365
12	1	t1	t1	t	t	t@t,com	+1231231313123	2024-10-27 10:50:30.496797	2024-10-31 14:10:14.399903
15	1	zwg	zwg	Nick	Rybin	zwg@gmail.com	+1231231231	2024-10-31 18:38:56.685826	2024-10-31 18:39:53.758806
11	2	hotel_admin	batman	Adam	West	Ad_west1337@gmail.com	+713213131	2024-10-26 23:55:20.779182	2024-11-06 08:25:38.007414
\.


--
-- Name: guests_id_seq; Type: SEQUENCE SET; Schema: public; Owner: hotel_admin
--

SELECT pg_catalog.setval('public.guests_id_seq', 25, true);


--
-- Name: payment_methods_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.payment_methods_id_seq', 6, true);


--
-- Name: permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: hotel_admin
--

SELECT pg_catalog.setval('public.permissions_id_seq', 3, true);


--
-- Name: reservations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: hotel_admin
--

SELECT pg_catalog.setval('public.reservations_id_seq', 69, true);


--
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: hotel_admin
--

SELECT pg_catalog.setval('public.roles_id_seq', 3, true);


--
-- Name: rooms_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.rooms_id_seq', 28, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: hotel_admin
--

SELECT pg_catalog.setval('public.users_id_seq', 15, true);


--
-- Name: guests guests_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.guests
    ADD CONSTRAINT guests_pkey PRIMARY KEY (id);


--
-- Name: payment_methods payment_methods_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment_methods
    ADD CONSTRAINT payment_methods_pkey PRIMARY KEY (id);


--
-- Name: permissions permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_pkey PRIMARY KEY (id);


--
-- Name: reservations reservations_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_pkey PRIMARY KEY (id);


--
-- Name: roles_permissions roles_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_pkey PRIMARY KEY (role_id, permission_id);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: rooms rooms_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.rooms
    ADD CONSTRAINT rooms_pkey PRIMARY KEY (id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: reservations reservations_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id);


--
-- Name: reservations_guests_rooms reservations_guests_guest_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations_guests_rooms
    ADD CONSTRAINT reservations_guests_guest_id_fkey FOREIGN KEY (guest_id) REFERENCES public.guests(id);


--
-- Name: reservations_guests_rooms reservations_guests_guest_id_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations_guests_rooms
    ADD CONSTRAINT reservations_guests_guest_id_fkey1 FOREIGN KEY (guest_id) REFERENCES public.guests(id);


--
-- Name: reservations_guests_rooms reservations_guests_reservation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations_guests_rooms
    ADD CONSTRAINT reservations_guests_reservation_id_fkey FOREIGN KEY (reservation_id) REFERENCES public.reservations(id);


--
-- Name: reservations_guests_rooms reservations_guests_reservation_id_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations_guests_rooms
    ADD CONSTRAINT reservations_guests_reservation_id_fkey1 FOREIGN KEY (reservation_id) REFERENCES public.reservations(id);


--
-- Name: reservations_guests_rooms reservations_guests_rooms_room_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations_guests_rooms
    ADD CONSTRAINT reservations_guests_rooms_room_id_fkey FOREIGN KEY (room_id) REFERENCES public.rooms(id);


--
-- Name: reservations reservations_last_update_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_last_update_by_fkey FOREIGN KEY (last_update_by) REFERENCES public.users(id);


--
-- Name: reservations reservations_payment_method_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.reservations
    ADD CONSTRAINT reservations_payment_method_fkey FOREIGN KEY (payment_method) REFERENCES public.payment_methods(id);


--
-- Name: roles_permissions roles_permissions_permission_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_permission_id_fkey FOREIGN KEY (permission_id) REFERENCES public.permissions(id);


--
-- Name: roles_permissions roles_permissions_permission_id_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_permission_id_fkey1 FOREIGN KEY (permission_id) REFERENCES public.permissions(id);


--
-- Name: roles_permissions roles_permissions_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: roles_permissions roles_permissions_role_id_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.roles_permissions
    ADD CONSTRAINT roles_permissions_role_id_fkey1 FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: users users_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: users users_role_id_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: hotel_admin
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_role_id_fkey1 FOREIGN KEY (role_id) REFERENCES public.roles(id);


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: pg_database_owner
--

GRANT ALL ON SCHEMA public TO hotel_admin;


--
-- Name: TABLE payment_methods; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.payment_methods TO hotel_admin;


--
-- Name: TABLE rooms; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.rooms TO hotel_admin;


--
-- PostgreSQL database dump complete
--

